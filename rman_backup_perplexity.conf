#
# RMAN Backup Configuration File
# File: rman_backup.conf
# Version: 1.0
# Description: Configuration settings for RMAN backup script
# 
# IMPORTANT: This file is sourced by the shell script. Use proper shell syntax.
# Variables can reference other variables using ${variable_name} syntax.
# All paths should be absolute paths for production reliability.
#

#
# Base directory configuration
# All backup-related directories will be created under this base path
#
base_dir="/backup/rman"

#
# Backup destination directories
# These directories will be created automatically if they don't exist
# Level 0 (full) backups go to backup_L0_dir
# Level 1 (incremental) backups go to backup_L1_dir  
# Archive log backups go to backup_Arch_dir
#
backup_L0_dir="${base_dir}/L0"
backup_L1_dir="${base_dir}/L1" 
backup_Arch_dir="${base_dir}/Arch"

#
# Backup file format specifications
# %s = backup set number, %p = piece number, %t = timestamp
# <date:dd-mon-yyyy> token will be replaced with actual date (e.g., 03-Oct-2025)
# 
# Examples of expanded formats:
#   L0_03-Oct-2025_%s_%p_%t.bkp
#   L1_03-Oct-2025_%s_%p_%t.bkp
#   Arch_03-Oct-2025_%s_%p_%t.bkp
#
backup_format_L0="${backup_L0_dir}/L0_<date:dd-mon-yyyy>_%s_%p_%t.bkp"
backup_format_L1="${backup_L1_dir}/L1_<date:dd-mon-yyyy>_%s_%p_%t.bkp"
backup_format_Arch="${backup_Arch_dir}/Arch_<date:dd-mon-yyyy>_%s_%p_%t.bkp"

#
# RMAN channel configuration
# channels: Number of parallel channels to allocate for backup operations
# More channels can improve performance but consume more system resources
# Recommended: 2-4 channels for most systems
#
channels=3

#
# Maximum size per backup piece
# Controls the size of individual backup files
# Larger pieces reduce file count but may be harder to manage
# Common values: 2G, 4G, 10G, 100G
# Must include size unit (K, M, G, T)
#
channel_max_size="4G"

#
# Oracle environment configuration
# oratab_path: Location of Oracle oratab file for instance discovery
# Standard locations: /etc/oratab (Linux/Unix), /var/opt/oracle/oratab (Solaris)
#
oratab_path="/etc/oratab"

#
# Backup retention policy
# retention_days: Number of days to retain backups
# RMAN will keep backups needed for point-in-time recovery within this window
# Obsolete backups beyond this period will be automatically deleted
# Recommended: 7-30 days depending on business requirements
#
retention_days=7

#
# Logging configuration
# logs_dir: Directory for all log files (backup, error, retention logs)
# This directory will be created automatically if it doesn't exist
#
logs_dir="${base_dir}/logs"

#
# RMAN binary location
# rman_binary: Full path to RMAN executable or just "rman" to use PATH
# If using full path, ensure it's correct for your Oracle installation
# Examples: /u01/app/oracle/product/19.0.0/dbhome_1/bin/rman
#           /opt/oracle/product/12.2.0/dbhome_1/bin/rman
#
rman_binary="rman"

#
# Compression configuration
# default_compression: Default compression setting if not specified via command line
# Y = Enable compression (saves space but uses more CPU)
# N = Disable compression (faster but larger backup files)
# This can be overridden by the -c command line argument
#
default_compression="N"

#
# Oracle environment profile (optional)
# environment_profile: Unix user whose profile should be sourced for Oracle environment
# Set to Oracle software owner username (commonly "oracle")
# Leave empty if not needed or if environment is set elsewhere
# The script will attempt to source /home/${environment_profile}/.bash_profile
#
environment_profile="oracle"

#
# Advanced RMAN configuration (optional)
# These settings can be uncommented and modified for specific requirements
#

# Control file autobackup format (uncomment to customize)
# controlfile_format="${base_dir}/controlfile/cf_%F"

# Backup optimization (uncomment to enable)
# backup_optimization="ON"

# Backup encryption (uncomment to enable - requires Oracle Advanced Security)
# encryption_algorithm="AES256"
# encryption_password="your_encryption_password"

# Disk backup location exclusions (uncomment to exclude specific mount points)
# exclude_paths="/tmp /var/tmp"

# Custom RMAN configuration commands (uncomment to add custom settings)
# custom_rman_config="CONFIGURE DEVICE TYPE DISK PARALLELISM 4;"

#
# Validation settings
# validate_backups: Set to Y to run VALIDATE command after backup completion
# This adds time but ensures backup integrity
#
validate_backups="N"

#
# Notification settings (reserved for future enhancement)
# These settings are not currently used but reserved for email/alert functionality
#
# notification_enabled="N"
# notification_email="dba@company.com"
# smtp_server="localhost"

#
# Performance tuning parameters
# backup_disk_io_slaves: Number of disk I/O slave processes (0 = disabled)
# large_pool_size: Minimum large pool size for backup operations (in MB)
# These settings may require database parameter adjustments
#
backup_disk_io_slaves=0
# large_pool_size=64

#
# Backup verification settings  
# crosscheck_before_backup: Run CROSSCHECK before backup to update repository
# delete_expired_before_backup: Delete expired backups before starting new backup
#
crosscheck_before_backup="Y"
delete_expired_before_backup="N"

#
# Archive log backup behavior
# delete_archived_logs: Delete archive logs after successful backup (Y/N)
# archive_lag_minutes: Only backup archive logs older than this many minutes
# This prevents backing up logs that might still be needed for replication
#
delete_archived_logs="Y"
archive_lag_minutes=15

#
# End of configuration file
# 
# Notes for customization:
# 1. Always use absolute paths in production environments
# 2. Ensure backup destinations have sufficient space
# 3. Test configuration changes in non-production first
# 4. Monitor backup logs regularly for performance and errors
# 5. Adjust retention_days based on your recovery requirements
# 6. Consider compression trade-off: space savings vs CPU usage and backup time
#